/*
 * boids.js
 * https://github.com/after12am/boids.js
 *
 * Copyright 2012-2018 Satoshi Okami
 * Released under the MIT license
 */
var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var b=0;return{next:function(){return b==a.length?{done:!0}:{done:!1,value:a[b++]}}}};
$jscomp.arrayFromIterator=function(a){for(var b,d=[];!(b=a.next()).done;)d.push(b.value);return d};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,b){function d(){}d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a;for(var c in b)if($jscomp.global.Object.defineProperties){var e=$jscomp.global.Object.getOwnPropertyDescriptor(b,c);e&&$jscomp.global.Object.defineProperty(a,c,e)}else a[c]=b[c]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,b){a instanceof String&&(a=String(a));var d=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c={},e=(c.next=function(){if(d<a.length){var c=d++;return{value:b(c,a[c]),done:!1}}e.next=$jscomp.array.done_;return $jscomp.array.done_()},c[Symbol.iterator]=function(){return e},c);return e};
$jscomp.array.findInternal_=function(a,b,d){a instanceof String&&(a=String(a));for(var c=a.length,e=0;e<c;e++){var g=a[e];if(b.call(d,g,e,a))return{i:e,v:g}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,b,d){b=void 0===b?function(a){return a}:b;var c=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var e;!(e=a.next()).done;)c.push(b.call(d,e.value))}else{e=a.length;for(var g=0;g<e;g++)c.push(b.call(d,a[g]))}return c};$jscomp.array.of=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return $jscomp.array.from(b)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,b){return[a,b]})};$jscomp.array.installHelper_=function(a,b){!Array.prototype[a]&&Object.defineProperties&&Object.defineProperty&&Object.defineProperty(Array.prototype,a,{configurable:!0,enumerable:!1,writable:!0,value:b})};$jscomp.array.entries$install=function(){$jscomp.array.installHelper_("entries",$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};
$jscomp.array.keys$install=function(){$jscomp.array.installHelper_("keys",$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,b){return b})};$jscomp.array.values$install=function(){$jscomp.array.installHelper_("values",$jscomp.array.values)};
$jscomp.array.copyWithin=function(a,b,d){var c=this.length;a=Number(a);b=Number(b);d=Number(null!=d?d:c);if(a<b)for(d=Math.min(d,c);b<d;)b in this?this[a++]=this[b++]:(delete this[a++],b++);else for(d=Math.min(d,c+b-a),a+=d-b;d>b;)--d in this?this[--a]=this[d]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){$jscomp.array.installHelper_("copyWithin",$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,b,d){null!=d&&a.length||(d=this.length||0);d=Number(d);for(b=Number((void 0===b?0:b)||0);b<d;b++)this[b]=a;return this};$jscomp.array.fill$install=function(){$jscomp.array.installHelper_("fill",$jscomp.array.fill)};$jscomp.array.find=function(a,b){return $jscomp.array.findInternal_(this,a,b).v};$jscomp.array.find$install=function(){$jscomp.array.installHelper_("find",$jscomp.array.find)};
$jscomp.array.findIndex=function(a,b){return $jscomp.array.findInternal_(this,a,b).i};$jscomp.array.findIndex$install=function(){$jscomp.array.installHelper_("findIndex",$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.set(b[0],b[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=d.get(b)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var c=d.entries(),e=c.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=c.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!c.next().done?!1:!0}catch(g){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,b){var d=this.maybeGetEntry_(a),c=d.id,e=d.list,d=d.entry;e||(e=this.data_[c]=[]);d?d.value=b:(d={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},e.push(d),this.head_.previous.next=d,this.head_.previous=d,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var b=this.maybeGetEntry_(a);a=b.id;var d=b.list,c=b.index;return(b=b.entry)&&d?(d.splice(c,1),d.length||delete this.data_[a],b.previous.next=b.next,b.next.previous=b.previous,b.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var b=$jscomp.Map.getId_(a),d=this.data_[b];if(d)for(var c=0;c<d.length;c++){var e=d[c];if(a!==a&&e.key!==e.key||a===e.key)return{id:b,list:d,index:c,entry:e}}return{id:b,list:d,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,b){for(var d=$jscomp.makeIterator(this.entries()),c=d.next();!c.done;c=d.next())c=c.value,a.call(b,c[1],c[0],this)};
$jscomp.Map.prototype.iter_=function(a){var b=this,d=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c={};return c.next=function(){if(d){for(;d.head!=b.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:a(d)};d=null}return{done:!0,value:void 0}},c[Symbol.iterator]=function(){return this},c};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,b,d){Object.defineProperty(a,b,{value:String(d)})}:function(a,b,d){a[b]=String(d)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var b=0;0===(a&4294901760)&&(a<<=16,b+=16);0===(a&4278190080)&&(a<<=8,b+=8);0===(a&4026531840)&&(a<<=4,b+=4);0===(a&3221225472)&&(a<<=2,b+=2);0===(a&2147483648)&&b++;return b};$jscomp.math.imul=function(a,b){a=Number(a);b=Number(b);var d=a&65535,c=b&65535;return d*c+((a>>>16&65535)*c+d*(b>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var b=a,d=1,c=a,e=0,g=1;e!=c;)b*=a,g*=-1,c=(e=c)+g*b/++d;return c}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var b=a,d=1,c=a,e=0;e!=c;)b*=a/++d,c=(e=c)+b;return c}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var b=Math.exp(2*-Math.abs(a)),b=(1-b)/(1+b);return 0>a?-b:b};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var b=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-b:b};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,b,d){for(var c=[],e=2;e<arguments.length;++e)c[e-2]=arguments[e];a=Number(a);b=Number(b);for(var g=Math.max(Math.abs(a),Math.abs(b)),l=$jscomp.makeIterator(c),e=l.next();!e.done;e=l.next())g=Math.max(g,Math.abs(e.value));if(1E100<g||1E-100>g){a/=g;b/=g;l=a*a+b*b;c=$jscomp.makeIterator(c);for(e=c.next();!e.done;e=c.next())e=e.value,e=Number(e)/g,l+=e*e;return Math.sqrt(l)*g}g=a*a+b*b;c=$jscomp.makeIterator(c);for(e=c.next();!e.done;e=c.next())e=e.value,e=Number(e),g+=
e*e;return Math.sqrt(g)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var b=Math.pow(Math.abs(a),1/3);return 0>a?-b:b};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,b){for(var d=[],c=1;c<arguments.length;++c)d[c-1]=arguments[c];d=$jscomp.makeIterator(d);for(c=d.next();!c.done;c=d.next())if(c=c.value)for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e]);return a};$jscomp.object.is=function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())this.add(b.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var b=Object.seal({x:4}),a=new a($jscomp.makeIterator([b]));if(a.has(b)||1!=a.size||a.add(b)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),d=a.next();if(d.done||d.value[0]!=b||d.value[1]!=b)return!1;d=a.next();return d.done||d.value[0]==b||4!=d.value[0].x||d.value[1]!=d.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,b){var d=this;this.map_.forEach(function(c){return a.call(b,c,c,d)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noNullOrUndefined_=function(a,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");};$jscomp.string.noRegExp_=function(a,b){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];for(var d="",b=$jscomp.makeIterator(b),c=b.next();!c.done;c=b.next()){c=c.value;c=+c;if(0>c||1114111<c||c!==Math.floor(c))throw new RangeError("invalid_code_point "+c);65535>=c?d+=String.fromCharCode(c):(c-=65536,d+=String.fromCharCode(c>>>10&1023|55296),d+=String.fromCharCode(c&1023|56320))}return d};
$jscomp.string.repeat=function(a){$jscomp.string.noNullOrUndefined_(this,"repeat");var b=String(this);if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){$jscomp.string.noNullOrUndefined_(this,"codePointAt");var b=String(this),d=b.length;a=Number(a)||0;if(0<=a&&a<d){a|=0;var c=b.charCodeAt(a);if(55296>c||56319<c||a+1===d)return c;a=b.charCodeAt(a+1);return 56320>a||57343<a?c:1024*(c-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,b){b=void 0===b?0:b;$jscomp.string.noRegExp_(a,"includes");$jscomp.string.noNullOrUndefined_(this,"includes");return-1!==String(this).indexOf(a,b)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,b){b=void 0===b?0:b;$jscomp.string.noRegExp_(a,"startsWith");$jscomp.string.noNullOrUndefined_(this,"startsWith");var d=String(this);a+="";for(var c=d.length,e=a.length,g=Math.max(0,Math.min(b|0,d.length)),l=0;l<e&&g<c;)if(d[g++]!=a[l++])return!1;return l>=e};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,b){$jscomp.string.noRegExp_(a,"endsWith");$jscomp.string.noNullOrUndefined_(this,"endsWith");var d=String(this);a+="";void 0===b&&(b=d.length);for(var c=Math.max(0,Math.min(b|0,d.length)),e=a.length;0<e&&0<c;)if(d[--c]!=a[--e])return!1;return 0>=e};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
var boids=function(){function a(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function");}function a(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function");}function a(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function");}function b(a,f){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==typeof f&&"function"!==typeof f?a:f}function d(a,f){if("function"!==
typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);a.prototype=Object.create(f&&f.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(a,f):a.__proto__=f)}function a(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function");}function b(a,f){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!==
typeof f&&"function"!==typeof f?a:f}function d(a,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);a.prototype=Object.create(f&&f.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});f&&(Object.setPrototypeOf?Object.setPrototypeOf(a,f):a.__proto__=f)}var c={VERSION:"1.4.1",THREE:{}};"use strict";var e=function(){function a(f,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(f,d.key,d)}}return function(f,b,c){b&&a(f.prototype,b);c&&a(f,c);return f}}();c.Vector3=function(){function b(f,c,d){a(this,b);this.x=f||0;this.y=c||0;this.z=d||0}e(b,[{key:"set",value:function(a,b,c){this.x=a;this.y=b;this.z=c;return this}},{key:"setX",value:function(a){this.x=a;return this}},{key:"setY",value:function(a){this.y=a;return this}},{key:"setZ",value:function(a){this.z=a;return this}},{key:"copy",value:function(a){this.x=a.x;this.y=
a.y;this.z=a.z;return this}},{key:"clone",value:function(){return new c.Vector3(this.x,this.y,this.z)}},{key:"add",value:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this}},{key:"addSelf",value:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this}},{key:"addScalar",value:function(a){this.x+=a;this.y+=a;this.z+=a;return this}},{key:"sub",value:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this}},{key:"subSelf",value:function(a){this.x-=a.x;this.y-=a.y;
this.z-=a.z;return this}},{key:"multiply",value:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this}},{key:"multiplySelf",value:function(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;return this}},{key:"multiplyScalar",value:function(a){this.x*=a;this.y*=a;this.z*=a;return this}},{key:"divideSelf",value:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this}},{key:"divideScalar",value:function(a){a?(this.x/=a,this.y/=a,this.z/=a):this.z=this.y=this.x=0;return this}},{key:"negate",
value:function(){return this.multiplyScalar(-1)}},{key:"dot",value:function(a){return this.x*a.x+this.y*a.y+this.z*a.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.lengthSq())}},{key:"lengthManhattan",value:function(){return this.x+this.y+this.z}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(a){return this.normalize().multiplyScalar(a)}},{key:"cross",
value:function(a,b){this.x=a.y*b.z-a.z*b.y;this.y=a.z*b.x-a.x*b.z;this.z=a.x*b.y-a.y*b.x;return this}},{key:"crossSelf",value:function(a){var b=this.x,c=this.y,d=this.z;this.x=c*a.z-d*a.y;this.y=d*a.x-b*a.z;this.z=b*a.y-c*a.x;return this}},{key:"distanceTo",value:function(a){return Math.sqrt(this.distanceToSquared(a))}},{key:"distanceToSquared",value:function(a){return(new c.Vector3).sub(this,a).lengthSq()}},{key:"isZero",value:function(){return 1E-4>this.lengthSq()}},{key:"limitScalar",value:function(a){var b=
this.lengthSq();b>a*a&&0<b&&(a/=Math.sqrt(b),this.x*=a,this.y*=a,this.z*=a);return this}}]);return b}();"use strict";c.nextVehicleId=function(){var a=0;return function(){return a++}}();c.getRandVec=function(){var a=new c.Vector3,b=360*Math.random()*Math.PI/180,d=2*Math.random()*Math.PI;a.x=Math.sin(b)*Math.cos(d);a.y=Math.sin(b)*Math.sin(d);a.z=Math.cos(b);return a};"use strict";e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in
e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();c.Vehicle=function(){function b(d,e,m){a(this,b);this.id=c.nextVehicleId();this.mass=1;this.maxSpeed=4;this.maxTrailSize=10;this.position=new c.Vector3(d,e,m);this.velocity=new c.Vector3;this.trails=[]}e(b,[{key:"update",value:function(){this.velocity.limitScalar(this.maxSpeed);this.position.addSelf(this.velocity);this.trails.push(this.position.clone());this.trails.length>=this.maxTrailSize&&
this.trails.shift()}},{key:"bounce",value:function(a,b,c){this.position.x>.5*a?(this.position.x=.5*a,this.velocity.x*=-1):this.position.x<.5*-a&&(this.position.x=.5*-a,this.velocity.x*=-1);this.position.y>.5*b?(this.position.y=.5*b,this.velocity.y*=-1):this.position.y<.5*-b&&(this.position.y=.5*-b,this.velocity.y*=-1);this.position.z>.5*c?(this.position.z=.5*c,this.velocity.z*=-1):this.position.z<.5*-c&&(this.position.z=.5*-c,this.velocity.z*=-1)}},{key:"wrap",value:function(a,b,c){this.position.x>
.5*a?this.position.x=.5*-a:this.position.x<.5*-a&&(this.position.x=.5*a);this.position.y>.5*b?this.position.y=.5*-b:this.position.y<.5*-b&&(this.position.y=.5*b);this.position.z>.5*c?this.position.z=.5*-c:this.position.z<.5*-c&&(this.position.z=.5*c)}}]);return b}();"use strict";$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();
$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function f(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d)return a=Object.getPrototypeOf(a),
null===a?void 0:f(a,b,c);if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)};c.SteeredVehicle=function(f){function k(d,e,f){a(this,k);var h=b(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,d,e,f)),g=360*Math.random(),l=360*Math.random();h.steeringForce=new c.Vector3;h.maxForce=1;h.wanderDistance=10;h.wanderRadius=5;h.wanderRange=10;h.pathIndex=0;h.pathThreshold=20;h.inSightDist=120;h.tooCloseDist=20;h.wander=function(){var a=new c.Vector3;new c.Vector3;a.set(h.velocity);
a.normalize();a.multiplyScalar(h.wanderDistance);var b=h.wanderRadius,d=g*Math.PI/180,e=l*Math.PI/180,f=new c.Vector3;f.x=b*Math.sin(d)*Math.cos(e);f.y=b*Math.sin(d)*Math.sin(e);f.z=b*Math.cos(d);g+=Math.random()*h.wanderRange-.5*h.wanderRange;l+=Math.random()*h.wanderRange-.5*h.wanderRange;h.steeringForce.addSelf(a.addSelf(f))};return h}d(k,f);e(k,[{key:"addForce",value:function(a){"object"==("undefined"===typeof a?"undefined":g(a))?this.steeringForce.addSelf(a):"number"==typeof a&&this.steeringForce.addScalar(a)}},
{key:"update",value:function(){this.steeringForce.limitScalar(this.maxForce);this.steeringForce.multiplyScalar(1/this.mass);this.velocity.addSelf(this.steeringForce);l(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this);this.steeringForce.set(0,0,0)}},{key:"seek",value:function(a){var b=new c.Vector3;b.set(a.x,a.y,a.z);b.subSelf(this.position);b.normalize();b.multiplyScalar(this.maxSpeed);this.steeringForce.addSelf(b.subSelf(this.velocity))}},{key:"flee",value:function(a){var b=
new c.Vector3;b.set(a.x,a.y,a.z);b.subSelf(this.position);b.normalize();b.multiplyScalar(this.maxSpeed);this.steeringForce.subSelf(b.subSelf(this.velocity))}},{key:"arrive",value:function(a){var b=25*this.maxSpeed,d=new c.Vector3;d.set(a.x,a.y,a.z);d.subSelf(this.position);d.normalize();a=this.position.distanceTo(a);a>b?d.multiplyScalar(this.maxSpeed):d.multiplyScalar(this.maxSpeed*a/b);this.steeringForce.addSelf(d.subSelf(this.velocity))}},{key:"pursue",value:function(a){var b=this.position.distanceTo(a.position)/
this.maxSpeed,d=new c.Vector3;d.set(a.velocity.x,a.velocity.y,a.velocity.z);d.multiplyScalar(b);b=new c.Vector3;b.set(a.position.x,a.position.y,a.position.z);b.addSelf(d);this.seek(b)}},{key:"evade",value:function(a){var b=this.position.distanceTo(a.position)/this.maxSpeed,d=new c.Vector3;d.set(a.velocity.x,a.velocity.y,a.velocity.z);d.multiplyScalar(b);b=new c.Vector3;b.set(a.position.x,a.position.y,a.position.z);b.subSelf(d);this.flee(b)}},{key:"patrol",value:function(a,b){b=b||!1;var c=this.pathIndex>=
a.length-1;this.position.distanceTo(a[this.pathIndex])<this.pathThreshold&&(c&&b?this.pathIndex=0:c||this.pathIndex++);c&&!b?this.arrive(a[this.pathIndex]):this.seek(a[this.pathIndex])}},{key:"flock",value:function(a){var b=new c.Vector3,d=new c.Vector3,e=0;b.set(this.velocity.x,this.velocity.y,this.velocity.z);for(var f=0;f<a.length;f++)a[f].id!=this.id&&this.inSight(a[f].position)&&(b.addSelf(a[f].velocity),d.addSelf(a[f].position),e++,this.tooClose(a[f].position)&&this.flee(a[f].position));0<e&&
(d.multiplyScalar(1/e),this.seek(d),b.multiplyScalar(1/e),this.steeringForce.addSelf(b.subSelf(this.velocity)))}},{key:"randomWalk",value:function(){var a=c.getRandVec();a.normalize();a.multiplyScalar(this.maxSpeed);this.steeringForce.addSelf(a.subSelf(this.velocity))}},{key:"inSight",value:function(a){if(this.position.distanceTo(a)>this.inSightDist)return!1;var b=new c.Vector3;b.set(this.velocity.x,this.velocity.y,this.velocity.z);b.normalize();var d=new c.Vector3;d.set(a);d.subSelf(this.position);
return 0>d.dot(b)?!1:!0}},{key:"tooClose",value:function(a){return this.position.distanceTo(a)<this.tooCloseDist}}]);return k}(c.Vehicle);"use strict";e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();c.BiologicalVehicle=function(f){function k(d,e,f){a(this,k);var g=b(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,
d,e,f));g.age=0;g.lifeSpan=1;g.remainingLifePer=1;c.SteeredVehicle.call(g,d,e,f);return g}d(k,f);e(k,[{key:"aging",value:function(a){this.age+=a;this.remainingLifePer=Math.max(0,Math.min(1,(this.lifeSpan-this.age)/this.lifeSpan))}},{key:"isDead",value:function(){return this.age>this.lifeSpan}}]);return k}(c.SteeredVehicle);"use strict";c.THREE.MeshObject=function(a,b){THREE.Mesh.call(this,a,b)};c.THREE.MeshObject.prototype=Object.create(THREE.Mesh.prototype);c.THREE.MeshObject.prototype.v=function(a,
b,c){};c.THREE.MeshObject.prototype.f3=function(a,b,c){};"use strict";c.THREE.Bird=function(a){function b(a,c,d){e.vertices.push(new THREE.Vector3(a,c,d))}function d(a,b,c){e.faces.push(new THREE.Face3(a,b,c))}a=a||{};a.color=void 0==a.color?6579300:a.color;a.position=void 0==a.position?new c.Vector3(0,0,0):a.position;var e=new THREE.Geometry,g=new THREE.MeshBasicMaterial({color:new THREE.Color(a.color),side:THREE.DoubleSide});b(5,0,0);b(-5,-2,1);b(-5,0,0);b(-5,-2,-1);b(0,2,-6);b(0,2,6);b(2,0,0);
b(-3,0,0);d(0,2,1);d(0,3,2);d(4,7,6);d(5,6,7);THREE.Mesh.call(this,e,g);this.phase=Math.floor(62.83*Math.random());this.behavior=new c.SteeredVehicle(a.position.x,a.position.y,a.position.z);this.behavior.maxForce=.15};c.THREE.Bird.prototype=Object.create(THREE.Mesh.prototype);c.THREE.Bird.prototype.seek=function(a){this.behavior.seek(a)};c.THREE.Bird.prototype.flee=function(a){this.behavior.flee(a)};c.THREE.Bird.prototype.arrive=function(a){this.behavior.arrive(a)};c.THREE.Bird.prototype.pursue=function(a){this.behavior.pursue(a)};
c.THREE.Bird.prototype.evade=function(a){this.behavior.evade(a)};c.THREE.Bird.prototype.patrol=function(a,b){this.behavior.patrol(a,b)};c.THREE.Bird.prototype.flock=function(a){this.behavior.flock(a)};c.THREE.Bird.prototype.randomWalk=function(){this.behavior.randomWalk()};c.THREE.Bird.prototype.inSight=function(a){this.behavior.inSight(a)};c.THREE.Bird.prototype.tooClose=function(a){this.behavior.tooClose(a)};c.THREE.Bird.prototype.wrap=function(a,b,c){this.behavior.wrap(a,b,c)};c.THREE.Bird.prototype.bounce=
function(a,b,c){this.behavior.bounce(a,b,c)};c.THREE.Bird.prototype.wander=function(){this.behavior.wander()};c.THREE.Bird.prototype.inSight=function(a){return this.behavior.inSight(a)};c.THREE.Bird.prototype.update=function(a){a=a||{};this.behavior.update();this.flap();this.position.x=this.behavior.position.x;this.position.y=this.behavior.position.y;this.position.z=this.behavior.position.z;void 0!=a.color&&(this.material.color=new THREE.Color(a.color))};c.THREE.Bird.prototype.flap=function(){this.rotation.y=
Math.atan2(-this.behavior.velocity.z,this.behavior.velocity.x);this.rotation.z=Math.asin(this.behavior.velocity.y/this.behavior.velocity.length());this.phase=(this.phase+(Math.max(0,this.rotation.z)+.1))%62.83;this.geometry.verticesNeedUpdate=!0;this.geometry.vertices[5].y=this.geometry.vertices[4].y=5*Math.sin(this.phase)};return c}();
